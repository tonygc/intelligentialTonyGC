{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\Challenges\\\\intelligential\\\\3. Caso Pr\\xE1ctico\\\\client-react\\\\src\\\\components\\\\listaSolicitudesBibliotecario\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { Presentational as PresentationalHistoryBooks } from './presentational';\nimport { useFetch } from '../customHooks/requestAPI';\nimport { useAuthState } from '../context';\nimport { today } from '../utilities';\nimport { ConfirmationDialog } from '../customHooks/customComponents';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Container = () => {\n  _s();\n\n  const [url, setUrl] = useState(\"http://localhost:3000/bookRequest/getAll\");\n  const [requestOptions, setRequestOptions] = useState({\n    method: \"GET\",\n    headers: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    },\n    body: null\n  });\n  const [response, loading, hasError, message] = useFetch(url, setUrl, requestOptions);\n  const {\n    userDetails\n  } = useAuthState();\n  ConfirmationDialog(\"Atención\", \"¿Está seguro de aprobar la solicitud?\");\n\n  const onConfirmApprove = () => {};\n\n  const onClickApprove = item => {\n    item.BORROWDATE = today();\n    setRequestOptions({ ...requestOptions,\n      method: \"PUT\",\n      body: JSON.stringify(item)\n    });\n    sendUpdate();\n  };\n\n  const onClickDenegate = item => {\n    item.DENEGATEDDATE = today();\n    setRequestOptions({ ...requestOptions,\n      method: \"PUT\",\n      body: JSON.stringify(item)\n    });\n    sendUpdate();\n  };\n\n  const onClickDeliver = item => {\n    item.DELIVERYDATE = today();\n    setRequestOptions({ ...requestOptions,\n      method: \"PUT\",\n      body: JSON.stringify(item)\n    });\n    sendUpdate();\n  };\n\n  const sendUpdate = () => {\n    setUrl(\"http://localhost:3000/bookRequest/update\");\n  };\n\n  useEffect(() => {\n    if (!response.data) {\n      if (response.success) {\n        setRequestOptions({\n          headers: {\n            'Accept': 'application/json, text/plain, */*',\n            'Content-Type': 'application/json'\n          },\n          method: \"GET\",\n          body: null\n        });\n        setUrl(\"http://localhost:3000/bookRequest/getAll\");\n      }\n    }\n  }, [response]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: response && /*#__PURE__*/_jsxDEV(PresentationalHistoryBooks, {\n      requests: response.data,\n      userAuth: userDetails,\n      onClickApprove: onClickApprove,\n      onClickDenegate: onClickDenegate,\n      onClickDeliver: onClickDeliver,\n      error: hasError,\n      response: response,\n      loading: loading,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Container, \"xI9DfP1bThgi0kTc+1s+3YqVJLY=\", false, function () {\n  return [useFetch, useAuthState];\n});\n\n_c = Container;\n\nvar _c;\n\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"sources":["C:/Proyectos/Challenges/intelligential/3. Caso Práctico/client-react/src/components/listaSolicitudesBibliotecario/index.js"],"names":["useState","useEffect","Presentational","PresentationalHistoryBooks","useFetch","useAuthState","today","ConfirmationDialog","Container","url","setUrl","requestOptions","setRequestOptions","method","headers","body","response","loading","hasError","message","userDetails","onConfirmApprove","onClickApprove","item","BORROWDATE","JSON","stringify","sendUpdate","onClickDenegate","DENEGATEDDATE","onClickDeliver","DELIVERYDATE","data","success"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react';\r\nimport {Presentational as PresentationalHistoryBooks} from './presentational';\r\nimport { useFetch } from '../customHooks/requestAPI';\r\nimport { useAuthState } from '../context';\r\nimport { today } from '../utilities';\r\nimport { ConfirmationDialog }  from '../customHooks/customComponents';\r\nexport const Container=()=>{\r\n    const [url, setUrl]=useState(\"http://localhost:3000/bookRequest/getAll\");\r\n    const [requestOptions, setRequestOptions]=useState(\r\n        { \r\n            method:\"GET\", \r\n            headers: {\r\n                'Accept': 'application/json, text/plain, */*',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body:null\r\n        }\r\n    );\r\n    const [ response, loading, hasError, message] = useFetch(url, setUrl, requestOptions);\r\n    const { userDetails} = useAuthState();\r\n    ConfirmationDialog(\"Atención\", \"¿Está seguro de aprobar la solicitud?\")\r\n    const onConfirmApprove=()=>{\r\n\r\n    };\r\n    const onClickApprove=(item)=>{\r\n        item.BORROWDATE = today();\r\n        setRequestOptions({...requestOptions, method:\"PUT\", body:JSON.stringify(item)});\r\n        sendUpdate();\r\n    };\r\n    const onClickDenegate=(item)=>{\r\n        item.DENEGATEDDATE = today();\r\n        setRequestOptions({...requestOptions, method:\"PUT\", body:JSON.stringify(item)});\r\n        sendUpdate();\r\n    };\r\n    const onClickDeliver=(item)=>{\r\n        item.DELIVERYDATE = today();\r\n        setRequestOptions({...requestOptions, method:\"PUT\", body:JSON.stringify(item)});\r\n        sendUpdate();\r\n    };\r\n    const sendUpdate=()=>{\r\n        setUrl(\"http://localhost:3000/bookRequest/update\");\r\n    };\r\n    useEffect(()=>{\r\n        if(!response.data){\r\n            if(response.success)\r\n            {\r\n                setRequestOptions(\r\n                    { \r\n                        headers: {\r\n                            'Accept': 'application/json, text/plain, */*',\r\n                            'Content-Type': 'application/json'\r\n                        },\r\n                        method:\"GET\", \r\n                        body:null\r\n                    }\r\n                );\r\n                setUrl(\"http://localhost:3000/bookRequest/getAll\");\r\n            }\r\n        }\r\n    },[response]);\r\n    return(\r\n        <div>\r\n            {(response &&\r\n                <PresentationalHistoryBooks \r\n                    requests={response.data} \r\n                    userAuth={userDetails}\r\n                    onClickApprove={onClickApprove}\r\n                    onClickDenegate={onClickDenegate}\r\n                    onClickDeliver={onClickDeliver}\r\n                    error={hasError}\r\n                    response={response}\r\n                    loading={loading}\r\n                    message={message}\r\n                />\r\n            )}\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}