{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\Challenges\\\\intelligential\\\\3. Caso Pr\\xE1ctico\\\\client-react\\\\src\\\\components\\\\solicitudes\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { Presentational as PresentationalHistoryBooks } from './presentational';\nimport { useFetch } from '../customHooks/requestAPI';\nimport { useAuthState } from '../context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Container = () => {\n  _s();\n\n  const [url, setUrl] = useState(\"http://localhost:3000/bookRequest/getAll\");\n  const [requestOptions, setRequestOptions] = useState({\n    method: \"GET\",\n    headers: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    },\n    body: null\n  });\n  const [response, loading, hasError, message] = useFetch(url, setUrl, requestOptions);\n  const {\n    userDetails\n  } = useAuthState();\n\n  const onClickApprove = item => {\n    item.BORROWDATE = \"\";\n    setRequestOptions({ ...requestOptions,\n      method: \"POST\",\n      body: JSON.stringify(item)\n    });\n    setUrl(\"http://localhost:3000/bookRequest/update\");\n  };\n\n  useEffect(() => {\n    if (!response.data) {\n      if (response.success) console.log(\"SOLICITUD ACTUALIZADA\");\n      setRequestOptions({\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        },\n        method: \"GET\",\n        body: null\n      });\n      setUrl(\"http://localhost:3000/bookRequest/getAll\");\n    }\n  }, [response]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading && /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Cargando...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }, this), hasError && /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Error al procesar la solicitud\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 21\n    }, this), response && /*#__PURE__*/_jsxDEV(PresentationalHistoryBooks, {\n      requests: response.data,\n      userAuth: userDetails,\n      onClickApprove: onClickApprove,\n      error: hasError,\n      response: response,\n      loading: loading,\n      message: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Container, \"xI9DfP1bThgi0kTc+1s+3YqVJLY=\", false, function () {\n  return [useFetch, useAuthState];\n});\n\n_c = Container;\n\nvar _c;\n\n$RefreshReg$(_c, \"Container\");","map":{"version":3,"sources":["C:/Proyectos/Challenges/intelligential/3. Caso PrÃ¡ctico/client-react/src/components/solicitudes/index.js"],"names":["useState","useEffect","Presentational","PresentationalHistoryBooks","useFetch","useAuthState","Container","url","setUrl","requestOptions","setRequestOptions","method","headers","body","response","loading","hasError","message","userDetails","onClickApprove","item","BORROWDATE","JSON","stringify","data","success","console","log"],"mappings":";;;AAAA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,OAAlC;AACA,SAAQC,cAAc,IAAIC,0BAA1B,QAA2D,kBAA3D;AACA,SAASC,QAAT,QAAyB,2BAAzB;AACA,SAASC,YAAT,QAA6B,YAA7B;;AACA,OAAO,MAAMC,SAAS,GAAC,MAAI;AAAA;;AACvB,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAcR,QAAQ,CAAC,0CAAD,CAA5B;AACA,QAAM,CAACS,cAAD,EAAiBC,iBAAjB,IAAoCV,QAAQ,CAC9C;AACIW,IAAAA,MAAM,EAAC,KADX;AAEIC,IAAAA,OAAO,EAAE;AACL,gBAAU,mCADL;AAEL,sBAAgB;AAFX,KAFb;AAMIC,IAAAA,IAAI,EAAC;AANT,GAD8C,CAAlD;AAUA,QAAM,CAAEC,QAAF,EAAYC,OAAZ,EAAqBC,QAArB,EAA+BC,OAA/B,IAA0Cb,QAAQ,CAACG,GAAD,EAAMC,MAAN,EAAcC,cAAd,CAAxD;AACA,QAAM;AAAES,IAAAA;AAAF,MAAiBb,YAAY,EAAnC;;AACA,QAAMc,cAAc,GAAEC,IAAD,IAAQ;AACzBA,IAAAA,IAAI,CAACC,UAAL,GAAgB,EAAhB;AACAX,IAAAA,iBAAiB,CAAC,EAAC,GAAGD,cAAJ;AAAoBE,MAAAA,MAAM,EAAC,MAA3B;AAAmCE,MAAAA,IAAI,EAACS,IAAI,CAACC,SAAL,CAAeH,IAAf;AAAxC,KAAD,CAAjB;AACAZ,IAAAA,MAAM,CAAC,0CAAD,CAAN;AACH,GAJD;;AAKAP,EAAAA,SAAS,CAAC,MAAI;AACV,QAAG,CAACa,QAAQ,CAACU,IAAb,EAAkB;AACd,UAAGV,QAAQ,CAACW,OAAZ,EACIC,OAAO,CAACC,GAAR,CAAY,uBAAZ;AAEJjB,MAAAA,iBAAiB,CACb;AACIE,QAAAA,OAAO,EAAE;AACL,oBAAU,mCADL;AAEL,0BAAgB;AAFX,SADb;AAKID,QAAAA,MAAM,EAAC,KALX;AAMIE,QAAAA,IAAI,EAAC;AANT,OADa,CAAjB;AAUAL,MAAAA,MAAM,CAAC,0CAAD,CAAN;AACH;AACJ,GAjBQ,EAiBP,CAACM,QAAD,CAjBO,CAAT;AAkBA,sBACI;AAAA,eACUC,OAAO,iBACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFZ,EAIUC,QAAQ,iBACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YALZ,EAOMF,QAAQ,iBACN,QAAC,0BAAD;AACI,MAAA,QAAQ,EAAEA,QAAQ,CAACU,IADvB;AAEI,MAAA,QAAQ,EAAEN,WAFd;AAGI,MAAA,cAAc,EAAEC,cAHpB;AAII,MAAA,KAAK,EAAEH,QAJX;AAKI,MAAA,QAAQ,EAAEF,QALd;AAMI,MAAA,OAAO,EAAEC,OANb;AAOI,MAAA,OAAO,EAAEE;AAPb;AAAA;AAAA;AAAA;AAAA,YARR;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAqBH,CA1DM;;GAAMX,S;UAYuCF,Q,EACzBC,Y;;;KAbdC,S","sourcesContent":["import {useState, useEffect} from 'react';\r\nimport {Presentational as PresentationalHistoryBooks} from './presentational';\r\nimport { useFetch } from '../customHooks/requestAPI';\r\nimport { useAuthState } from '../context';\r\nexport const Container=()=>{\r\n    const [url, setUrl]=useState(\"http://localhost:3000/bookRequest/getAll\");\r\n    const [requestOptions, setRequestOptions]=useState(\r\n        { \r\n            method:\"GET\", \r\n            headers: {\r\n                'Accept': 'application/json, text/plain, */*',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body:null\r\n        }\r\n    );\r\n    const [ response, loading, hasError, message] = useFetch(url, setUrl, requestOptions);\r\n    const { userDetails} = useAuthState();\r\n    const onClickApprove=(item)=>{\r\n        item.BORROWDATE=\"\";\r\n        setRequestOptions({...requestOptions, method:\"POST\", body:JSON.stringify(item)});\r\n        setUrl(\"http://localhost:3000/bookRequest/update\");\r\n    };\r\n    useEffect(()=>{\r\n        if(!response.data){\r\n            if(response.success)\r\n                console.log(\"SOLICITUD ACTUALIZADA\");\r\n            \r\n            setRequestOptions(\r\n                { \r\n                    headers: {\r\n                        'Accept': 'application/json, text/plain, */*',\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    method:\"GET\", \r\n                    body:null\r\n                }\r\n            );\r\n            setUrl(\"http://localhost:3000/bookRequest/getAll\");\r\n        }\r\n    },[response]);\r\n    return(\r\n        <div>\r\n                {(loading && \r\n                    <label>Cargando...</label>\r\n                )}\r\n                {(hasError && \r\n                    <label>Error al procesar la solicitud</label>\r\n                )}\r\n            {(response &&\r\n                <PresentationalHistoryBooks \r\n                    requests={response.data} \r\n                    userAuth={userDetails}\r\n                    onClickApprove={onClickApprove}\r\n                    error={hasError}\r\n                    response={response}\r\n                    loading={loading}\r\n                    message={message}\r\n                />\r\n            )}\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}